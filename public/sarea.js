var sarea=function(t){var e={};function i(n){if(e[n])return e[n].exports;var l=e[n]={i:n,l:!1,exports:{}};return t[n].call(l.exports,l,l.exports,i),l.l=!0,l.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.addClass=function(t,e){e=" "+e;var i=null;-1==(i="string"==typeof t?document.getElementById(t):t).className.indexOf(e)&&(i.className+=e)},e.removeClass=function(t,e){e=" "+e;var i=null;(i="string"==typeof t?document.getElementById(t):t).className=i.className.replace(e,"")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listData,this.blockNum,this.selValAry,this.selTagAry}return n(t,[{key:"setData",value:function(t,e){this.listData=t,this.blockNum=e}},{key:"getBlockNum",value:function(){return this.blockNum}},{key:"initSelAry",value:function(t){(t=t||[]).splice(0,0,"");var e=this.blockNum-(t.length-1);if(e>0)for(var i=this.getValByKeyAry(t),n=0;n<e;n++){var l=this.getFirstKey(i);t.push(l),i[l]&&i[l]&&(i=i[l].items)}this.selValAry=t,this.selTagAry=[];for(var s=0;s<this.selValAry.length;s++)this.selTagAry.push(-1)}},{key:"setSel",value:function(t,e,i){if(this.selValAry[t]!=i){this.selValAry[t]=i,this.selTagAry[t]=e;for(var n=this.blockNum-t,l=0;l<n;l++)this.selValAry.pop(),this.selTagAry.pop();for(var s=0;s<n;s++){var a=this.getValByKeyAry(this.selValAry),r=this.getFirstKey(a);this.selValAry.push(r),""==r?this.selTagAry.push(-1):this.selTagAry.push(0)}}else this.selValAry[t]=i,this.selTagAry[t]=e}},{key:"getAllSelVal",value:function(){return this.selValAry}},{key:"getSelValById",value:function(t){return this.selValAry[t]}},{key:"getValByKeyAry",value:function(t){for(var e=this.listData,i=1;i<t.length;i++){var n=t[i];if(!e[n]||!e[n].items)break;e=e[n].items}return e}},{key:"getListDataById",value:function(t){for(var e=[],i=0;i<t;i++)e.push(this.selValAry[i]);return this.getValByKeyAry(e)}},{key:"getTagByKey",value:function(t,e){var i=0;for(var n in t){if(e==n)break;i++}return i}},{key:"getFirstKey",value:function(t){for(var e in t)return e;return""}}]),t}();e.selData=new l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.close=e.open=e.addSelEventListener=e.init=void 0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(0)),l=i(1),s=i(3);null==window.clog&&(window.clog=function(t){});var a=null,r=null,o="cont-sarea-show",c=(e.init=function(t,e){l.selData.setData(t,e);var i="";i+='\n\t<div id="sarea" class="sarea">\n\t\t<div class="sarea-hd">\n\t\t\t<span id="btn-area-cancel" class="btn">取消</span>\n\t\t\t<span id="btn-area-ok" class="btn">确认</span>\n\t\t</div>\n\n\t\t<div class="sarea-bd">\n\t\t\t<div id="selmask" class="selmask"></div>\n\t\t</div>\n\t</div>\n\t';var n="cont-sarea",s=document.createElement("div");s.className=n,s.id=n,document.body.appendChild(s),function(t){window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;t.style.fontSize=e/7.5+"px"}(s),s.innerHTML=i,a=document.getElementById(n),document.querySelector("#btn-area-cancel").onclick=function(){c()},document.querySelector("#btn-area-ok").onclick=function(){var t=new Event("onSel");t.data=l.selData.getAllSelVal(),a.dispatchEvent(t),c()}},e.addSelEventListener=function(t,e){null!=a?a.addEventListener("onSel",function(i){null==e?t(i.data):t.call(e,i.data)}):console.error("sarea 还没初始化")},e.open=function(t){if(null!=a){if(n.addClass(a,o),null==r){l.selData.initSelAry(t);var e=a.querySelector(".sarea-bd");r=new s.SelScroll(e,l.selData.getBlockNum()-1,1)}else t&&l.selData.initSelAry(t);r.updateList()}else console.error("sarea 还没初始化")},e.close=function(){null!=a?n.removeClass(a,o):console.error("sarea 还没初始化")})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelScroll=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(0)),s=i(1);var a=function(t){var e=document.createElement("div");return e.id=t,e.className="block "+t,e.innerHTML='<ul class="sarea-list"></ul>',e};e.SelScroll=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var l=a("block-"+n);e.appendChild(l),this.bId=n,this.listData=null,this.subSelScroll=i>0?new t(e,i-1,n+1):null,this.el_cont=l,this.el_list=this.el_cont.querySelector(".sarea-list"),this.el_items=null,this.itemHei=null,this.slowAniTimer=null,this.inSlowAni=!1,this.inTouch=!1,this.maxTop=0,this.startTimeStamp=0,this.startClientY=0,this.curMoveClientY=0,this.el_cont.addEventListener("touchstart",this.onTouchStart.bind(this),!0),this.el_cont.addEventListener("touchmove",this.onTouchMove.bind(this),!1),this.el_cont.addEventListener("touchend",this.onTouchEnd.bind(this),!0)}return n(t,[{key:"onTouchStart",value:function(t){if(t.preventDefault(),!this.inSlowAni){this.inTouch=!0;var e=t.changedTouches[0];this.startTimeStamp=t.timeStamp,this.startClientY=e.clientY,this.curMoveClientY=e.clientY}}},{key:"onTouchMove",value:function(t){t.preventDefault(),this.inTouch&&this.drag(t,!1)}},{key:"onTouchEnd",value:function(t){if(t.preventDefault(),this.inTouch){this.inTouch=!1;var e=t.changedTouches[0],i=Math.abs(t.timeStamp-this.startTimeStamp),n=Math.abs(e.clientY-this.startClientY);if(i<300&&n<this.itemHei)this.drag(t,!0);else if(i<400&&n>=2*this.itemHei){var l;l=e.clientY>this.startClientY?-1:1,this.slide(l,i/400)}else this.drag(t,!0)}else this.inTouch=!1}},{key:"drag",value:function(t,e){var i=t.changedTouches[0],n=this.el_cont.scrollTop+this.curMoveClientY-i.clientY;n<0&&(n=0),n>this.maxTop&&(n=this.maxTop),this.el_cont.scrollTop=n,this.curMoveClientY=i.clientY,e&&this.aniSlowTop()}},{key:"slide",value:function(t,e){var i=this.el_cont,n=i.scrollTop+t*this.maxTop*(1-e);n<0&&(n=0),n>this.maxTop&&(n=this.maxTop);var l=!1,s=setInterval(function(){var t=i.scrollTop+2;Math.abs(t-i.scrollTop)<=2&&(t=n,l=!0),i.scrollTop=t,l&&(clearInterval(s),this.aniSlowTop())}.bind(this),50)}},{key:"aniSlowTop",value:function(){this.inSlowAni=!0;var t=this.getCurSelInfo();s.selData.setSel(this.bId,t.tag,t.name),this.subSelScroll&&this.subSelScroll.updateList(),console.log("cur sel info",this.bId,t.tag,t.name);var e=this.el_cont,i=t.tag*this.itemHei;if(e.scrollTop!=i){l.addClass(e,"block-stop");e.scrollTop;this.slowAniTimer=setInterval(function(){var t=e.scrollTop+.5;Math.abs(t-e.scrollTop)<=.5?(e.scrollTop=i,l.removeClass(e,"block-stop"),clearInterval(this.slowAniTimer),this.slowAniTimer=null,this.onAniSlowTopEnd()):(e.scrollTop=t,console.log("nnn",t))}.bind(this),30)}else this.onAniSlowTopEnd()}},{key:"onAniSlowTopEnd",value:function(t){setTimeout(function(){this.inSlowAni=!1}.bind(this),80)}},{key:"updateMaxTop",value:function(){l.removeClass(this.el_cont,"block-stop"),this.el_cont.scrollTop=0,this.maxTop=this.el_list.clientHeight-this.el_cont.clientHeight}},{key:"setCurSel",value:function(t){this.el_cont.scrollTop=t*this.itemHei}},{key:"addList",value:function(){var t=0,e="";e+=this.createItem("",++t),e+=this.createItem("",++t);for(var i in this.listData)e+=this.createItem(i,++t);e+=this.createItem("",++t),e+=this.createItem("",++t),this.el_list.innerHTML=e}},{key:"createItem",value:function(t,e){return'<li id="sarea-item-'+e+'" class="sarea-item sarea-item-'+this.bId+'">'+t+"</li>"}},{key:"updateList",value:function(){this.listData=s.selData.getListDataById(this.bId),this.addList(),this.el_items=this.el_list.getElementsByClassName("sarea-item"),null==this.itemHei&&(this.itemHei=this.el_cont.clientHeight/5),this.updateMaxTop();var t=s.selData.getSelValById(this.bId),e=s.selData.getTagByKey(this.listData,t);this.setCurSel(e),this.subSelScroll&&this.subSelScroll.updateList()}},{key:"getCurSelInfo",value:function(){var t=Math.round(this.el_cont.scrollTop/this.itemHei);return{tag:t,name:this.el_items[t+2].innerHTML}}}]),t}()}]);