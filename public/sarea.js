var sarea=function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.addClass=function(t,e){e=" "+e;var n=null;-1==(n="string"==typeof t?document.getElementById(t):t).className.indexOf(e)&&(n.className+=e)},e.removeClass=function(t,e){e=" "+e;var n=null;(n="string"==typeof t?document.getElementById(t):t).className=n.className.replace(e,"")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listData,this.blockNum,this.selValAry,this.selTagAry}return i(t,[{key:"setData",value:function(t,e){this.listData=t,this.blockNum=e}},{key:"getBlockNum",value:function(){return this.blockNum}},{key:"initSelAry",value:function(t){(t=t||[]).splice(0,0,"");var e=this.blockNum-(t.length-1);if(e>0)for(var n=this.getValByKeyAry(t),i=0;i<e;i++){var a=this.getFirstKey(n);t.push(a),n[a]&&n[a]&&(n=n[a].items)}this.selValAry=t,this.selTagAry=[];for(var l=0;l<this.selValAry.length;l++)this.selTagAry.push(-1);console.log("this.selValAry",this.selValAry),console.log("this.selTagAry",this.selTagAry)}},{key:"setSel",value:function(t,e,n){if(this.selValAry[t]!=n){this.selValAry[t]=n,this.selTagAry[t]=e;for(var i=this.blockNum-t,a=0;a<i;a++)this.selValAry.pop(),this.selTagAry.pop();for(var l=0;l<i;l++){var s=this.getValByKeyAry(this.selValAry),r=this.getFirstKey(s);this.selValAry.push(r),""==r?this.selTagAry.push(-1):this.selTagAry.push(0)}}else this.selValAry[t]=n,this.selTagAry[t]=e}},{key:"getAllSelVal",value:function(){return this.selValAry}},{key:"getSelValById",value:function(t){return this.selValAry[t]}},{key:"getValByKeyAry",value:function(t){for(var e=this.listData,n=1;n<t.length;n++){var i=t[n];if(!e[i]||!e[i].items)break;e=e[i].items}return e}},{key:"getListDataById",value:function(t){for(var e=[],n=0;n<t;n++)e.push(this.selValAry[n]);return this.getValByKeyAry(e)}},{key:"getTagByKey",value:function(t,e){var n=0;for(var i in t){if(e==i)break;n++}return n}},{key:"getFirstKey",value:function(t){for(var e in t)return e;return""}}]),t}();e.selData=new a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listData,this.blockNum,this.selValAry,this.selTagAry}return i(t,[{key:"setData",value:function(t){this.listData=t,this.blockNum=this.listData.length}},{key:"getBlockNum",value:function(){return this.blockNum}},{key:"initSelAry",value:function(t){(t=t||[]).splice(0,0,""),this.selValAry=t,this.selTagAry=[];for(var e=0;e<this.selValAry.length;e++)this.selTagAry.push(-1)}},{key:"setSel",value:function(t,e,n){this.selValAry[t]=n,this.selTagAry[t]=e}},{key:"getAllSelVal",value:function(){var t=0,e="";for(var n in this.listData[0])t++,e=n;return 1==t?["",e]:this.selValAry}},{key:"getSelValById",value:function(t){return this.selValAry[t]}},{key:"getValByKeyAry",value:function(t){for(var e=this.listData,n=1;n<t.length;n++){var i=t[n];if(!e[i]||!e[i].items)break;e=e[i].items}return e}},{key:"getListDataById",value:function(t){return this.listData[t-1]}},{key:"getTagByKey",value:function(t,e){var n=0;for(var i in t){if(e==i)break;n++}return n}},{key:"getFirstKey",value:function(t){for(var e in t)return e;return""}}]),t}();e.selDataV2=new a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.close=e.openV2=e.open=e.addSelEventListener=e.initV2=e.init=void 0;var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),a=n(1),l=n(2),s=n(4);null==window.clog&&(window.clog=function(t){});var r=null,o=null,u="cont-sarea-show",c=function(t){window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;t.style.fontSize=e/7.5+"px"},h=(e.init=function(t,e){a.selData.setData(t,e),o=null;var n=document.getElementById("curSarea");n&&n.remove();var i="";i+='\n\t<div id="curSarea" class="sarea">\n\t\t<div class="sarea-hd">\n\t\t\t<span id="btn-area-cancel" class="btn">取消</span>\n\t\t\t<span id="btn-area-ok" class="btn">确认</span>\n\t\t</div>\n\t\t<div class="sarea-bd">\n\t\t\t<div id="selmask" class="selmask"></div>\n\t\t</div>\n\t</div>\n\t';var l="cont-sarea",s=document.createElement("div");s.className=l,s.id=l,document.body.appendChild(s),c(s),s.innerHTML=i,r=document.getElementById(l),document.querySelector("#btn-area-cancel").onclick=function(){h()},document.querySelector("#btn-area-ok").onclick=function(){var t=new Event("onSel");t.data=a.selData.getAllSelVal(),r.dispatchEvent(t),h()}},e.initV2=function(t){l.selDataV2.setData(t),o=null;var e=document.getElementById("cont-sarea");e&&e.remove();var n="";n+='\n\t<div id="curSarea" class="sarea">\n\t\t<div class="sarea-hd">\n\t\t\t<span id="btn-area-cancel" class="btn">取消</span>\n\t\t\t<span id="btn-area-ok" class="btn">确认</span>\n\t\t</div>\n\n\t\t<div class="sarea-bd">\n\t\t\t<div id="selmask" class="selmask"></div>\n\t\t</div>\n\t</div>\n\t';var i="cont-sarea",a=document.createElement("div");a.className=i,a.id=i,document.body.appendChild(a),c(a),a.innerHTML=n,r=document.getElementById(i),document.querySelector("#btn-area-cancel").onclick=function(){h()},document.querySelector("#btn-area-ok").onclick=function(){var t=new Event("onSel");t.data=l.selDataV2.getAllSelVal(),r.dispatchEvent(t),h()}},e.addSelEventListener=function(t,e){null!=r?r.addEventListener("onSel",function(n){null==e?t(n.data):t.call(e,n.data)}):console.error("sarea 还没初始化")},e.open=function(t){if(null!=r){if(i.addClass(r,u),null==o){a.selData.initSelAry(t);var e=r.querySelector(".sarea-bd");o=new s.SelScroll(e,a.selData.getBlockNum()-1,1,!0)}else t&&a.selData.initSelAry(t);o.updateList()}else console.error("sarea 还没初始化")},e.openV2=function(t){if(null!=r){if(i.addClass(r,u),null==o){l.selDataV2.initSelAry(t);var e=r.querySelector(".sarea-bd");o=new s.SelScroll(e,l.selDataV2.getBlockNum()-1,1,!1)}else t&&l.selDataV2.initSelAry(t);o.updateList()}else console.error("sarea 还没初始化")},e.close=function(){null!=r?i.removeClass(r,u):console.error("sarea 还没初始化")})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelScroll=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),l=n(1),s=n(2);var r=function(t){var e=document.createElement("div");return e.id=t,e.className="block "+t,e.innerHTML='<ul class="sarea-list"></ul>',e};e.SelScroll=function(){function t(e,n,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o=r("block-"+i);e.appendChild(o),this.bId=i,this.listData=null,this.isAss=a,this.slData=a?l.selData:s.selDataV2,this.subSelScroll=n>0?new t(e,n-1,i+1,this.isAss):null,this.el_cont=o,this.el_list=this.el_cont.querySelector(".sarea-list"),this.el_items=null,this.itemHei=null,this.slowAniTimer=null,this.inSlowAni=!1,this.inTouch=!1,this.maxTop=0,this.startTimeStamp=0,this.startClientY=0,this.curMoveClientY=0,this.el_cont.addEventListener("touchstart",this.onTouchStart.bind(this),!0),this.el_cont.addEventListener("touchmove",this.onTouchMove.bind(this),!1),this.el_cont.addEventListener("touchend",this.onTouchEnd.bind(this),!0)}return i(t,[{key:"onTouchStart",value:function(t){if(t.preventDefault(),!this.inSlowAni){this.inTouch=!0;var e=t.changedTouches[0];this.startTimeStamp=t.timeStamp,this.startClientY=e.clientY,this.curMoveClientY=e.clientY}}},{key:"onTouchMove",value:function(t){t.preventDefault(),this.inTouch&&this.drag(t,!1)}},{key:"onTouchEnd",value:function(t){if(t.preventDefault(),this.inTouch){this.inTouch=!1;var e=t.changedTouches[0],n=Math.abs(t.timeStamp-this.startTimeStamp),i=Math.abs(e.clientY-this.startClientY);if(n<250&&i<this.itemHei)this.drag(t,!0);else if(n<300&&i>=2*this.itemHei){var a;a=e.clientY>this.startClientY?-1:1;var l=1-n/300,s=i/(10*this.itemHei),r=Math.ceil(s*l*100);this.slide(t,a,r)}else this.drag(t,!0)}else this.inTouch=!1}},{key:"drag",value:function(t,e){var n=t.changedTouches[0].clientY,i=t.currentTarget,a=i.scrollTop+this.curMoveClientY-n;a<0&&(a=0),a>this.maxTop&&(a=this.maxTop),i.scrollTop=a,this.curMoveClientY=n,e&&(console.log("eee0",a),this.aniSlowTop(i))}},{key:"slide",value:function(t,e,n){var i=t.currentTarget,a=i.scrollTop+e*this.maxTop*n/100;a<0&&(a=0),a>this.maxTop&&(a=this.maxTop);var l,s=a-i.scrollTop;l=s>0?30:-30;var r=Math.round(Math.abs(s/l)),o=!1,u=setInterval(function(){r--;var t=i.scrollTop+l;r<=0&&(t=a,o=!0),i.scrollTop=t,o&&(clearInterval(u),this.aniSlowTop(i))}.bind(this),25)}},{key:"aniSlowTop",value:function(t){this.inSlowAni=!0;var e=this.getCurSelInfo();this.slData.setSel(this.bId,e.tag,e.name),this.subSelScroll&&this.isAss&&this.subSelScroll.updateList();var n,i=e.tag*this.itemHei;if(t.scrollTop==i)return this.onAniSlowTopEnd(),void console.log(" == ");a.addClass(t,"block-stop");var l=i-t.scrollTop;n=l>0?1:-1;var s=Math.round(Math.abs(l/n));this.slowAniTimer=setInterval(function(){s--;var e=t.scrollTop+n;s<=0?(t.scrollTop=i,a.removeClass(t,"block-stop"),clearInterval(this.slowAniTimer),this.slowAniTimer=null,this.onAniSlowTopEnd()):t.scrollTop=e}.bind(this),25)}},{key:"onAniSlowTopEnd",value:function(t){setTimeout(function(){this.inSlowAni=!1}.bind(this),80)}},{key:"updateMaxTop",value:function(){a.removeClass(this.el_cont,"block-stop"),this.el_cont.scrollTop=0,this.maxTop=this.el_list.clientHeight-this.el_cont.clientHeight}},{key:"setCurSel",value:function(t){this.el_cont.scrollTop=t*this.itemHei}},{key:"addList",value:function(){var t=0,e="";e+=this.createItem("",++t),e+=this.createItem("",++t);for(var n in this.listData)e+=this.createItem(n,++t);e+=this.createItem("",++t),e+=this.createItem("",++t),this.el_list.innerHTML=e}},{key:"createItem",value:function(t,e){return'<li id="sarea-item-'+e+'" class="sarea-item sarea-item-'+this.bId+'">'+t+"</li>"}},{key:"updateList",value:function(){this.listData=this.slData.getListDataById(this.bId),this.addList(),this.el_items=this.el_list.getElementsByClassName("sarea-item"),null==this.itemHei&&(this.itemHei=this.el_cont.clientHeight/5),this.updateMaxTop();var t=this.slData.getSelValById(this.bId),e=this.slData.getTagByKey(this.listData,t);this.setCurSel(e),this.subSelScroll&&this.subSelScroll.updateList()}},{key:"getCurSelInfo",value:function(){var t=Math.round(this.el_cont.scrollTop/this.itemHei);return{tag:t,name:this.el_items[t+2].innerHTML}}}]),t}()}]);